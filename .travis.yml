language: java
jdk:
- oraclejdk8
dist: trusty
sudo: required
env:
  - PROFILE=mariadb PROJECT=kangaroo-common
  - PROFILE=mariadb PROJECT=kangaroo-server-authz
  - PROFILE=h2 PROJECT=kangaroo-common
  - PROFILE=h2 PROJECT=kangaroo-server-authz
services:
  - docker
addons:
  mariadb: '10.0'
branches:
  only:
  - master
  - develop
  - /^feature\/.*$/
  - /^hotfix\/.*$/
  - /^release\/.*$/
install:
  - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V -Ptravis
script:
  - mvn install -P$PROFILE -pl $PROJECT
after_success:
  - mvn coveralls:report -Ptravis
